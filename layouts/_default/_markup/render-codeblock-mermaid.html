<pre class="mermaid">
  {{- .Inner | safeHTML }}
</pre>

{{ if not (.Page.Store.Get "hasMermaid") }}
  {{ .Page.Store.Set "hasMermaid" true }}
  
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    
    mermaid.initialize({ 
      startOnLoad: true,
      theme: 'default',
      
      // Better sizing for diagrams
      flowchart: {
        useMaxWidth: false,
        htmlLabels: true,
        curve: 'basis',
        padding: 20
      },
      
      // Larger fonts
      themeVariables: {
        fontSize: '18px',
        fontFamily: 'sans-serif'
      },
      
      // Gantt chart settings
      gantt: {
        useMaxWidth: false
      }
    });
  </script>
{{ end }}
